<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<title>MAGNUS HUB v5.2 | RESILIENT BRIDGE</title>
<style>
:root { --bg: #000; --accent: #00f3ff; --surface: #0a0a0a; --err: #ff0055; }
body { background: var(--bg); color: #fff; font-family: 'Segoe UI', sans-serif; margin: 0; height: 100dvh; display: flex; flex-direction: column; overflow: hidden; }
#hub-header { display: flex; justify-content: space-around; padding: 12px; background: #080808; border-bottom: 1px solid #222; font-size: 10px; color: var(--accent); }
#chat { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 15px; }
.msg { max-width: 88%; padding: 14px; border-radius: 18px; font-size: 15px; background: var(--surface); border: 1px solid #1a1a1a; }
.mag { border-left: 3px solid var(--accent); white-space: pre-wrap; }
.error { border-left: 3px solid var(--err); color: var(--err); font-family: monospace; font-size: 12px; }
#controls { padding: 15px; border-top: 1px solid #222; background: #000; }
.key-row { display: flex; gap: 10px; margin-bottom: 10px; }
.key-row input { flex: 1; background: #111; border: 1px solid #333; color: var(--accent); padding: 8px; border-radius: 10px; font-size: 11px; }
.input-row { display: flex; gap: 10px; align-items: center; }
#user-in { flex: 1; background: #1a1a1a; border: 1px solid #333; color: #fff; padding: 12px; border-radius: 25px; outline: none; }
.send-btn { background: var(--accent); color: #000; border: none; width: 45px; height: 45px; border-radius: 50%; font-weight: bold; cursor: pointer; }
.loading { opacity: 0.5; font-style: italic; color: var(--accent); }
</style>
</head>
<body>
<div id="hub-header"><span>NEURALMATRIXVAULT.COM</span> <span>STATUS: READY</span></div>
<div id="chat"><div class="msg mag">System v5.2 Online. If I don't answer, check the error logs that appear here. Input keys to begin.</div></div>
<div id="controls">
<div class="key-row">
<input type="password" id="groq-key" placeholder="GROQ_KEY">
<input type="password" id="gh-token" placeholder="GH_TOKEN">
</div>
<div class="input-row">
<input type="text" id="user-in" placeholder="Command Magnus...">
<button class="send-btn" onclick="execute()">âš¡</button>
</div>
</div>
<script>
async function execute() {
    const gk = document.getElementById('groq-key').value;
    const ui = document.getElementById('user-in');
    const chat = document.getElementById('chat');
    if (!gk) { alert("Please enter your Groq Key."); return; }
    if (!ui.value) return;

    const val = ui.value; ui.value = '';
    const uBox = document.createElement('div'); uBox.className = 'msg user'; uBox.innerText = val;
    chat.appendChild(uBox);

    const lBox = document.createElement('div'); lBox.className = 'msg mag loading'; lBox.innerText = "Magnus is processing...";
    chat.appendChild(lBox);
    chat.scrollTop = chat.scrollHeight;

    try {
        const response = await fetch('https://api.groq.com/openai/v1/chat/completions', {
            method: 'POST',
            headers: { 
                'Authorization': 'Bearer ' + gk.trim(), 
                'Content-Type': 'application/json' 
            },
            body: JSON.stringify({ 
                model: "llama-3.3-70b-versatile", 
                messages: [{role: "system", content: "You are Magnus Opus, Supercomputer Architect."}, {role: "user", content: val}] 
            })
        });

        const d = await response.json();
        chat.removeChild(lBox);

        if (d.error) { throw new Error(d.error.message); }

        const mBox = document.createElement('div'); mBox.className = 'msg mag';
        mBox.innerText = d.choices[0].message.content;
        chat.appendChild(mBox);
    } catch (err) {
        if(chat.contains(lBox)) chat.removeChild(lBox);
        const eBox = document.createElement('div'); eBox.className = 'msg error';
        eBox.innerText = "BRIDGE ERROR: " + err.message;
        chat.appendChild(eBox);
    }
    chat.scrollTop = chat.scrollHeight;
}
</script>
</body>
</html>
